package com.example.assetmanagement.common.util;

import com.example.assetmanagement.model.ResponseWrapper;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;

public class ResponseUtil {

    public static <T> ResponseEntity<ResponseWrapper<T>> success(T data) {
        ResponseWrapper<T> wrapper = new ResponseWrapper<>();
        ResponseWrapper.Response<T> response = new ResponseWrapper.Response<>();
        response.setStatus("ok");
        response.setData(data);
        wrapper.setRsp(response);
        return ResponseEntity.ok(wrapper);
    }

    public static ResponseEntity<ResponseWrapper<Void>> error(String errorCode) {
        return error(errorCode, ErrorMessage.getMessage(errorCode));
    }

    public static ResponseEntity<ResponseWrapper<Void>> error(String errorCode, String message) {
        ResponseWrapper<Void> wrapper = new ResponseWrapper<>();
        ResponseWrapper.Response<Void> response = new ResponseWrapper.Response<>();
        response.setStatus("fail");
        ResponseWrapper.Error error = new ResponseWrapper.Error();
        error.setCode(errorCode);
        error.setMsg(message);
        response.setError(error);
        wrapper.setRsp(response);
        return ResponseEntity.status(HttpStatus.valueOf(Integer.parseInt(errorCode))).body(wrapper);
    }
}

package com.example.assetmanagement.common.exception;

import com.example.assetmanagement.common.util.ErrorCode;
import com.example.assetmanagement.common.util.ResponseUtil;
import com.example.assetmanagement.model.ResponseWrapper;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.ControllerAdvice;
import org.springframework.web.bind.annotation.ExceptionHandler;

@ControllerAdvice
public class GlobalExceptionHandler {

    @ExceptionHandler(AssetNotFoundException.class)
    public ResponseEntity<ResponseWrapper<Void>> handleAssetNotFoundException(AssetNotFoundException ex) {
        return ResponseUtil.error(ErrorCode.NOT_FOUND, ex.getMessage());
    }

    @ExceptionHandler(InvalidParameterException.class)
    public ResponseEntity<ResponseWrapper<Void>> handleInvalidParameterException(InvalidParameterException ex) {
        return ResponseUtil.error(ErrorCode.BAD_REQUEST, ex.getMessage());
    }

    @ExceptionHandler(Exception.class)
    public ResponseEntity<ResponseWrapper<Void>> handleGenericException(Exception ex) {
        return ResponseUtil.error(ErrorCode.INTERNAL_SERVER_ERROR);
    }
}


package com.example.assetmanagement.service;

import com.example.assetmanagement.common.exception.AssetNotFoundException;
import com.example.assetmanagement.common.util.ErrorCode;
import com.example.assetmanagement.common.util.ErrorMessage;
import com.example.assetmanagement.model.Asset;
import com.example.assetmanagement.repository.AssetRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import java.util.List;

@Service
public class AssetServiceImpl implements AssetService {

    @Autowired
    private AssetRepository assetRepository;

    @Override
    public List<Asset> getAssetsByAssetId(String assetId) {
        List<Asset> assets = assetRepository.getAssetsByAssetId(assetId);
        if (assets.isEmpty()) {
            throw new AssetNotFoundException(ErrorMessage.getMessage(ErrorCode.NOT_FOUND, "Asset not found"));
        }
        return assets;
    }

    @Override
    public void createAsset(Asset asset) {
        assetRepository.createAsset(asset);
    }
}
